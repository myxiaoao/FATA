
<!DOCTYPE HTML>
<html lang="" >
    <head>
        <meta charset="UTF-8">
        <meta content="text/html; charset=utf-8" http-equiv="Content-Type">
        <title>11.2 In Action 实践 · GitBook</title>
        <meta http-equiv="X-UA-Compatible" content="IE=edge" />
        <meta name="description" content="">
        <meta name="generator" content="GitBook 3.2.2">
        
        
        
    
    <link rel="stylesheet" href="../gitbook/style.css">

    
            
                
                <link rel="stylesheet" href="../gitbook/gitbook-plugin-highlight/website.css">
                
            
                
                <link rel="stylesheet" href="../gitbook/gitbook-plugin-search/search.css">
                
            
                
                <link rel="stylesheet" href="../gitbook/gitbook-plugin-fontsettings/website.css">
                
            
        

    

    
        
    
        
    
        
    
        
    
        
    
        
    

        
    
    
    <meta name="HandheldFriendly" content="true"/>
    <meta name="viewport" content="width=device-width, initial-scale=1, user-scalable=no">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="black">
    <link rel="apple-touch-icon-precomposed" sizes="152x152" href="../gitbook/images/apple-touch-icon-precomposed-152.png">
    <link rel="shortcut icon" href="../gitbook/images/favicon.ico" type="image/x-icon">

    
    
    <link rel="prev" href="11.1_Introduction.html" />
    

    </head>
    <body>
        
<div class="book">
    <div class="book-summary">
        
            
<div id="book-search-input" role="search">
    <input type="text" placeholder="Type to search" />
</div>

            
                <nav role="navigation">
                


<ul class="summary">
    
    

    

    
        
        
    
        <li class="chapter " data-level="1.1" data-path="../">
            
                <a href="../">
            
                    
                    Author's Note
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.2" >
            
                <span>
            
                    
                    1 Dependency Injection 依赖注入
            
                </span>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="1.2.1" data-path="1.1_The_Problem.html">
            
                <a href="1.1_The_Problem.html">
            
                    
                    1.1 The Problem 遇到的问题
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.2.2" data-path="1.2_Build_A_Contract.html">
            
                <a href="1.2_Build_A_Contract.html">
            
                    
                    1.2 Build A Contract 建立约定
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.2.3" data-path="1.3_Take_It_further.html">
            
                <a href="1.3_Take_It_further.html">
            
                    
                    1.3 Take It further 更进一步
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.2.4" data-path="1.4_Too_Much_Java.html">
            
                <a href="1.4_Too_Much_Java.html">
            
                    
                    1.4 Too Much Java? 太像Java了？
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="1.3" >
            
                <span>
            
                    
                    2 The IoC Container 控制反转容器
            
                </span>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="1.3.1" data-path="2.1_Basic_Binding.html">
            
                <a href="2.1_Basic_Binding.html">
            
                    
                    2.1 Basic Binding 基础绑定
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.3.2" data-path="2.2_Reflective_Resolution.html">
            
                <a href="2.2_Reflective_Resolution.html">
            
                    
                    2.2 Reflective Resolution 反射解决方案
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="1.4" >
            
                <span>
            
                    
                    3 Interface As Contract 接口约定
            
                </span>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="1.4.1" data-path="3.1_Strong_Typing_&_Water_Fowl.html">
            
                <a href="3.1_Strong_Typing_&_Water_Fowl.html">
            
                    
                    3.1 Strong Typing & Water Fowl 强类型和小鸭子
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.4.2" data-path="3.2_A_Contract_Example.html">
            
                <a href="3.2_A_Contract_Example.html">
            
                    
                    3.2 A Contract Example 约定的范例
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.4.3" data-path="3.3_Interface_&_Team_Development.html">
            
                <a href="3.3_Interface_&_Team_Development.html">
            
                    
                    3.3 Interface & Team Development 接口与团队开发
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="1.5" >
            
                <span>
            
                    
                    4 Service Provider 服务提供者
            
                </span>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="1.5.1" data-path="4.1_As_Bootstrapper.html">
            
                <a href="4.1_As_Bootstrapper.html">
            
                    
                    4.1 As Bootstrapper 他是引导程序
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.5.2" data-path="4.2_As_Organizer.html">
            
                <a href="4.2_As_Organizer.html">
            
                    
                    4.2 As Organizer 作为管理工具
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.5.3" data-path="4.3_Booting_Providers.html">
            
                <a href="4.3_Booting_Providers.html">
            
                    
                    4.3 Booting Providers 服务提供者的启动过程
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.5.4" data-path="4.4_Providing_The_Core.html">
            
                <a href="4.4_Providing_The_Core.html">
            
                    
                    4.4 Providing The Core 核心也是服务提供者的模式
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="1.6" >
            
                <span>
            
                    
                    5 Application Structure 应用结构
            
                </span>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="1.6.1" data-path="5.1_Introduction.html">
            
                <a href="5.1_Introduction.html">
            
                    
                    5.1 Introduction 介绍
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.6.2" data-path="5.2_MVC_Is_Killing_You.html">
            
                <a href="5.2_MVC_Is_Killing_You.html">
            
                    
                    5.2 MVC Is Killing You MVC是慢性谋杀
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.6.3" data-path="5.3_Bye_Models.html">
            
                <a href="5.3_Bye_Models.html">
            
                    
                    5.3 Bye, Bye Models 再见，模型
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.6.4" data-path="5.4_It's_All_About_The_Layers.html">
            
                <a href="5.4_It's_All_About_The_Layers.html">
            
                    
                    5.4 It's All About The Layers 核心思想就是分层
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.6.5" data-path="5.5_Where_To_Put_Stuff.html">
            
                <a href="5.5_Where_To_Put_Stuff.html">
            
                    
                    5.5 Where To Put "Stuff" 东西都放哪儿？
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="1.7" >
            
                <span>
            
                    
                    6 Applied Architecture: Decoupling Handles 实用做法：解耦处理函数
            
                </span>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="1.7.1" data-path="6.1_Introduction.html">
            
                <a href="6.1_Introduction.html">
            
                    
                    6.1 Introduction 介绍
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.7.2" data-path="6.2_Decoupling_Handlers.html">
            
                <a href="6.2_Decoupling_Handlers.html">
            
                    
                    6.2 Decoupling Handlers 解耦处理函数
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.7.3" data-path="6.3_Other_Handlers.html">
            
                <a href="6.3_Other_Handlers.html">
            
                    
                    6.3 Other Handlers 其他处理函数
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="1.8" >
            
                <span>
            
                    
                    7 Extending The Framework 扩展框架
            
                </span>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="1.8.1" data-path="7.1_Introduction.html">
            
                <a href="7.1_Introduction.html">
            
                    
                    7.1 Introduction 介绍
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.8.2" data-path="7.2_Managers_&_Factories.html">
            
                <a href="7.2_Managers_&_Factories.html">
            
                    
                    7.2 Managers & Factories 管理者和工厂
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.8.3" data-path="7.3_Cache.html">
            
                <a href="7.3_Cache.html">
            
                    
                    7.3 Cache 缓存
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.8.4" data-path="7.4_Session.html">
            
                <a href="7.4_Session.html">
            
                    
                    7.4 Session 会话
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.8.5" data-path="7.5_Authentication.html">
            
                <a href="7.5_Authentication.html">
            
                    
                    7.5 Authentication 身份认证
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.8.6" data-path="7.6_IoC_Based_Extension.html">
            
                <a href="7.6_IoC_Based_Extension.html">
            
                    
                    7.6 IoC Based Extension 使用容器进行扩展
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.8.7" data-path="7.7_Request_Extension.html">
            
                <a href="7.7_Request_Extension.html">
            
                    
                    7.7 Request Extension 请求的扩展
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="1.9" >
            
                <span>
            
                    
                    8 Single Responsibility Principle 单一职责原则
            
                </span>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="1.9.1" data-path="8.1_Introduction.html">
            
                <a href="8.1_Introduction.html">
            
                    
                    8.1 Introduction 介绍
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.9.2" data-path="8.2_In_Action.html">
            
                <a href="8.2_In_Action.html">
            
                    
                    8.2 In Action 实践
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="1.10" >
            
                <span>
            
                    
                    9 Open Closed Principle 开放封闭原则
            
                </span>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="1.10.1" data-path="9.1_Introduction.html">
            
                <a href="9.1_Introduction.html">
            
                    
                    9.1 Introduction 介绍
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.10.2" data-path="9.2_In_Action.html">
            
                <a href="9.2_In_Action.html">
            
                    
                    9.2 In Action 实践
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="1.11" >
            
                <span>
            
                    
                    10 Liskov Substitution Principle 里氏替换原则
            
                </span>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="1.11.1" data-path="10.1_Introduction.html">
            
                <a href="10.1_Introduction.html">
            
                    
                    10.1 Introduction 介绍
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.11.2" data-path="10.2_In_Action.html">
            
                <a href="10.2_In_Action.html">
            
                    
                    10.2 In Action 实践
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="1.12" >
            
                <span>
            
                    
                    11 Interface Segregation Principle 接口隔离原则
            
                </span>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="1.12.1" data-path="11.1_Introduction.html">
            
                <a href="11.1_Introduction.html">
            
                    
                    11.1 Introduction 介绍
            
                </a>
            

            
        </li>
    
        <li class="chapter active" data-level="1.12.2" data-path="11.2_In_Action.html">
            
                <a href="11.2_In_Action.html">
            
                    
                    11.2 In Action 实践
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="1.13" >
            
                <span>
            
                    
                    12 Dependency Inversion Principle 依赖反转原则
            
                </span>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="1.13.1" data-path="12.1_Introduction.html">
            
                <a href="12.1_Introduction.html">
            
                    
                    12.1 Introduction 介绍
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.13.2" data-path="12.2_In_Action.html">
            
                <a href="12.2_In_Action.html">
            
                    
                    12.2 In Action 实践
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    

    

    <li class="divider"></li>

    <li>
        <a href="https://www.gitbook.com" target="blank" class="gitbook-link">
            Published with GitBook
        </a>
    </li>
</ul>


                </nav>
            
        
    </div>

    <div class="book-body">
        
            <div class="body-inner">
                
                    

<div class="book-header" role="navigation">
    

    <!-- Title -->
    <h1>
        <i class="fa fa-circle-o-notch fa-spin"></i>
        <a href=".." >11.2 In Action 实践</a>
    </h1>
</div>




                    <div class="page-wrapper" tabindex="-1" role="main">
                        <div class="page-inner">
                            
<div id="book-search-results">
    <div class="search-noresults">
    
                                <section class="normal markdown-section">
                                
                                <h2 id="in-action-&#x5B9E;&#x8DF5;">In Action &#x5B9E;&#x8DF5;</h2>
<p>To illustrate this principle, let&apos;s consider an example session handing library. In fact, we will consider PHP&apos;s own SessionHandlerInterface. Here are the methods defined by this interface, which is included with PHP beginning in version 5.4:</p>
<p>&#x4E3A;&#x4E86;&#x8BF4;&#x660E;&#x8BE5;&#x539F;&#x5219;&#xFF0C;&#x6211;&#x4EEC;&#x6765;&#x601D;&#x8003;&#x4E00;&#x4E2A;&#x5173;&#x4E8E;&#x4F1A;&#x8BDD;&#x5904;&#x7406;&#x7684;&#x7C7B;&#x5E93;&#x3002;&#x5B9E;&#x9645;&#x4E0A;&#x6211;&#x4EEC;&#x5C06;&#x8981;&#x8003;&#x5BDF;PHP&#x81EA;&#x5DF1;&#x7684;SessionHandlerInterface&#x3002;&#x4E0B;&#x9762;&#x662F;&#x8BE5;&#x63A5;&#x53E3;&#x5B9A;&#x4E49;&#x7684;&#x65B9;&#x6CD5;&#xFF0C;&#x4ED6;&#x4EEC;&#x662F;&#x4ECE;PHP 5.4&#x7248;&#x624D;&#x5F00;&#x59CB;&#x6709;&#x7684;&#xFF1A;</p>
<pre><code>interface SessionHandlerInterface {
    public function close();
    public function destroy($sessionId);
    public function gc($maxLifetime);
    public function open($savePath, $name);
    public function read($sesssionId);
    public function write($sessionId, $sessionData);
}
</code></pre><p>Now that you are familiar with the methods defined by this interface, consider an implementation using Memcached. Would a Memcached implementation of this interface define functionality for each of these methods? Not only do we not need to implement all of these methods, we don&apos;t need half of them!</p>
<p>&#x73B0;&#x5728;&#x6211;&#x4EEC;&#x77E5;&#x9053;&#x63A5;&#x53E3;&#x91CC;&#x9762;&#x90FD;&#x662F;&#x4EC0;&#x4E48;&#x65B9;&#x6CD5;&#x4E86;&#xFF0C;&#x6211;&#x4EEC;&#x6253;&#x7B97;&#x7528; Memcached &#x6765;&#x5B9E;&#x73B0;&#x5B83;&#x3002;Memcached &#x9700;&#x8981;&#x5B9E;&#x73B0;&#x8FD9;&#x4E2A;&#x63A5;&#x53E3;&#x91CC;&#x7684;&#x6240;&#x6709;&#x65B9;&#x6CD5;&#x4E48;&#xFF1F;&#x4E0D;&#xFF0C;&#x91CC;&#x9762;&#x4E00;&#x534A;&#x7684;&#x65B9;&#x6CD5;&#x5BF9;&#x4E8E; Memcached &#x6765;&#x8BF4;&#x90FD;&#x662F;&#x4E0D;&#x9700;&#x8981;&#x5B9E;&#x73B0;&#x7684;&#xFF01;</p>
<p>Since Memcached will automatically expire the values it contains, we do not need to implement the gc method of the interface, nor do we need to implement the open or close methods of the interface. So, we are forced to define &quot;stubs&quot; for these methods in our implementation that are just empty methods. To correct this problem, let&apos;s start by defining a smaller, more focused interface for session garbage collection:</p>
<p>&#x56E0;&#x4E3A; Memcached &#x4F1A;&#x81EA;&#x52A8;&#x6E05;&#x9664;&#x5B58;&#x50A8;&#x7684;&#x8FC7;&#x671F;&#x6570;&#x636E;&#xFF0C;&#x6211;&#x4EEC;&#x4E0D;&#x9700;&#x8981;&#x5B9E;&#x73B0; gc &#x65B9;&#x6CD5;&#x3002;&#x6211;&#x4EEC;&#x4E5F;&#x4E0D;&#x9700;&#x8981;&#x5B9E;&#x73B0; open &#x548C; close &#x65B9;&#x6CD5;&#x3002;&#x6240;&#x4EE5;&#x6211;&#x4EEC;&#x88AB;&#x8FEB;&#x53BB;&#x5199;&#x7A7A;&#x65B9;&#x6CD5;&#x6765;&#x7AD9;&#x7740;&#x4F4D;&#x5B50;&#x3002;&#x4E3A;&#x4E86;&#x89E3;&#x51B3;&#x5728;&#x8FD9;&#x4E2A;&#x95EE;&#x9898;&#xFF0C;&#x6211;&#x4EEC;&#x6765;&#x5B9A;&#x4E49;&#x4E00;&#x4E2A;&#x5C0F;&#x5DE7;&#x7684;&#x4E13;&#x95E8;&#x7528;&#x6765;&#x5783;&#x573E;&#x56DE;&#x6536;&#x7684;&#x63A5;&#x53E3;&#xFF1A;</p>
<pre><code>interface GarbageCollectorInterface {
    public function gc($maxLifetime);
}
</code></pre><p>Now that we have a smaller interface, any consuming code can depend on this focused contract, which defines a very narrow set of functionality and does not create a dependency on the entire session handler.</p>
<p>&#x73B0;&#x5728;&#x6211;&#x4EEC;&#x6709;&#x4E86;&#x4E00;&#x4E2A;&#x5C0F;&#x5DE7;&#x7684;&#x63A5;&#x53E3;&#xFF0C;&#x529F;&#x80FD;&#x5355;&#x4E00;&#x800C;&#x4E13;&#x6CE8;&#x3002;&#x9700;&#x8981;&#x5783;&#x573E;&#x6E05;&#x7406;&#x7684;&#x53EA;&#x7528;&#x4F9D;&#x8D56;&#x8FD9;&#x4E2A;&#x63A5;&#x53E3;&#x5373;&#x53EF;&#xFF0C;&#x800C;&#x4E0D;&#x5FC5;&#x53BB;&#x4F9D;&#x8D56;&#x6574;&#x4E2A;&#x4F1A;&#x8BDD;&#x5904;&#x7406;&#x3002;</p>
<p>To further understand the principle, let&apos;s reinforce our knowledge with another example. Imagine we have a Contact Eloquent class that is defined like so:</p>
<p>&#x4E3A;&#x4E86;&#x66F4;&#x6DF1;&#x5165;&#x7406;&#x89E3;&#x8BE5;&#x539F;&#x5219;&#xFF0C;&#x6211;&#x4EEC;&#x7528;&#x53E6;&#x4E00;&#x4E2A;&#x4F8B;&#x5B50;&#x6765;&#x5F3A;&#x5316;&#x7406;&#x89E3;&#x3002;&#x60F3;&#x8C61;&#x6211;&#x4EEC;&#x6709;&#x4E00;&#x4E2A;&#x540D;&#x4E3A;Contact&#x7684;Eloquent&#x7C7B;&#xFF0C;&#x5B9A;&#x4E49;&#x6210;&#x8FD9;&#x6837;&#xFF1A;</p>
<pre><code>class Contact extends Eloquent {
    public function getNameAttribute()
    {
        return $this-&gt;attributes[&apos;name&apos;];
    }
    public function getEmailAttribute()
    {
        return $this-&gt;attributes[&apos;email&apos;];
    }
}
</code></pre><p>Now, let&apos;s assume that our application also employs a PasswordReminder class that is responsible for sending password reminder e-mails to users of the application. Below is a possible definition of the PasswordReminder class:</p>
<p>&#x73B0;&#x5728;&#x6211;&#x4EEC;&#x518D;&#x5047;&#x8BBE;&#x6211;&#x4EEC;&#x5E94;&#x7528;&#x91CC;&#x8FD8;&#x6709;&#x4E00;&#x4E2A;&#x53EB; PasswordReminder &#x7684;&#x7C7B;&#x6765;&#x8D1F;&#x8D23;&#x7ED9;&#x7528;&#x6237;&#x53D1;&#x9001;&#x5BC6;&#x7801;&#x627E;&#x56DE;&#x90AE;&#x4EF6;&#x3002;&#x4E0B;&#x9762;&#x662F; PasswordReminder &#x7684;&#x5B9A;&#x4E49;&#x65B9;&#x5F0F;&#x7684;&#x4E00;&#x79CD;&#xFF1A;</p>
<pre><code>class PasswordReminder {
    public function remind(Contact $contact, $view)
    {
        // Send password reminder e-mail...
    }
}
</code></pre><p>As you probably noticed, our PassswordReminder is dependent upon the Contact class, which in turns means it is dependent on the Eloquent ORM. It is neither desirable or necessary to couple the password reminder system to a specific ORM implementation. By breaking the dependency, we can freely change our back-end storage mechanism or ORM without affecting the password reminder component of the application. Again, by breaking one of the SOLID principles, we have given a consuming class too much knowledge about the rest of the application.</p>
<p>&#x4F60;&#x53EF;&#x80FD;&#x6CE8;&#x610F;&#x5230;&#x4E86;&#xFF0C;PasswordReminder &#x4F9D;&#x8D56;&#x7740; Contact &#x7C7B;&#xFF0C;&#x4E5F;&#x5C31;&#x662F;&#x4F9D;&#x8D56;&#x7740; Eloquent ORM&#x3002; &#x5BF9;&#x4E8E;&#x4E00;&#x4E2A;&#x5BC6;&#x7801;&#x627E;&#x56DE;&#x7CFB;&#x7EDF;&#x6765;&#x8BF4;&#xFF0C;&#x4F9D;&#x8D56;&#x7740;&#x4E00;&#x4E2A;&#x7279;&#x5B9A;&#x7684; ORM &#x5B9E;&#x5728;&#x662F;&#x6CA1;&#x5FC5;&#x8981;&#xFF0C;&#x4E5F;&#x662F;&#x4E0D;&#x53EF;&#x53D6;&#x7684;&#x3002;&#x5207;&#x65AD;&#x5BF9;&#x8BE5; ORM &#x7684;&#x4F9D;&#x8D56;&#xFF0C;&#x6211;&#x4EEC;&#x5C31;&#x53EF;&#x4EE5;&#x81EA;&#x7531;&#x7684;&#x6539;&#x53D8;&#x6211;&#x4EEC;&#x540E;&#x53F0;&#x5B58;&#x50A8;&#x673A;&#x5236;&#x6216;&#x8005;&#x8BF4; ORM&#xFF0C;&#x540C;&#x65F6;&#x4E0D;&#x4F1A;&#x5F71;&#x54CD;&#x5230;&#x6211;&#x4EEC;&#x7684;&#x5BC6;&#x7801;&#x627E;&#x56DE;&#x7EC4;&#x4EF6;&#x3002;&#x91CD;&#x7533;&#x4E00;&#x904D;&#xFF0C;&#x8FDD;&#x80CC;&#x4E86;&#x201C;&#x575A;&#x5B9E;&#x201D;&#x539F;&#x5219;&#x7684;&#x4EFB;&#x4F55;&#x4E00;&#x6761;&#xFF0C;&#x5C31;&#x610F;&#x5473;&#x7740;&#x6709;&#x4E2A;&#x7C7B;&#x5B83;&#x77E5;&#x9053;&#x7684;&#x592A;&#x591A;&#x4E86;&#x3002;</p>
<p>To break the dependency, let&apos;s create a RemindableInterface. In fact, such an interface is included with Laravel, and is implemented by the User model by default:</p>
<p>&#x8981;&#x5207;&#x65AD;&#x8FD9;&#x79CD;&#x4F9D;&#x8D56;&#xFF0C;&#x6211;&#x4EEC;&#x6765;&#x521B;&#x5EFA;&#x4E00;&#x4E2A; RemindableInterface &#x63A5;&#x53E3;&#x3002;&#x4E8B;&#x5B9E;&#x4E0A; Laravel &#x5DF2;&#x7ECF;&#x6709;&#x4E86;&#x8FD9;&#x4E2A;&#x63A5;&#x53E3;&#xFF0C;&#x5E76;&#x4E14;&#x9ED8;&#x8BA4;&#x7531; User &#x6A21;&#x578B;&#x5B9E;&#x73B0;&#x4E86;&#x8BE5;&#x63A5;&#x53E3;&#xFF1A;</p>
<pre><code>interface RemindableInterface {
    public function getReminderEmail();
}
</code></pre><p>Once the interface has been created, we can implement it on our model:</p>
<p>&#x4E00;&#x65E6;&#x63A5;&#x53E3;&#x5B9A;&#x4E49;&#x597D;&#x4E86;&#xFF0C;&#x6211;&#x4EEC;&#x5C31;&#x53EF;&#x4EE5;&#x5728;&#x6A21;&#x578B;&#x4E0A;&#x5B9E;&#x73B0;&#x5B83;&#xFF1A;</p>
<pre><code>class Contact extends Eloquent implements RemindableInterface {
    public function getReminderEmail()
    {
        return $this-&gt;email;
    }
}
</code></pre><p>Finally, we can depend on this smaller, more focused interface in the PasswordReminder:</p>
<p>&#x6700;&#x7EC8;&#x6211;&#x4EEC;&#x53EF;&#x4EE5;&#x5728; PasswordReminder &#x91CC;&#x9762;&#x4F9D;&#x8D56;&#x8FD9;&#x6837;&#x4E00;&#x4E2A;&#x5C0F;&#x5DE7;&#x4E14;&#x4E13;&#x6CE8;&#x7684;&#x63A5;&#x53E3;&#x4E86;&#xFF1A;</p>
<pre><code>class PasswordReminder {
    public function remind(RemindableInterface $remindable, $view)
    {
        // Send password reminder e-mail...
    }
}
</code></pre><p>By making this simple change, we have removed unnecessary dependencies from the password reminder component and made it flexible enough to use any class from any ORM, so long as that class implements the new RemindableInterface. This is exactly how the Laravel password reminder component remains database and ORM agnostic!</p>
<p>&#x901A;&#x8FC7;&#x8FD9;&#x5C0F;&#x5C0F;&#x7684;&#x6539;&#x52A8;&#xFF0C;&#x6211;&#x4EEC;&#x5DF2;&#x7ECF;&#x79FB;&#x9664;&#x4E86;&#x5BC6;&#x7801;&#x627E;&#x56DE;&#x7EC4;&#x4EF6;&#x91CC;&#x4E0D;&#x5FC5;&#x8981;&#x7684;&#x4F9D;&#x8D56;&#xFF0C;&#x5E76;&#x4E14;&#x4F7F;&#x5B83;&#x8DB3;&#x591F;&#x7075;&#x6D3B;&#x80FD;&#x4F7F;&#x7528;&#x4EFB;&#x4F55;&#x5B9E;&#x73B0;&#x4E86; RemindableInterface &#x7684;&#x7C7B;&#x6216; ORM&#x3002;&#x8FD9;&#x5176;&#x5B9E;&#x6B63;&#x662F; Laravel &#x7684;&#x5BC6;&#x7801;&#x627E;&#x56DE;&#x7EC4;&#x4EF6;&#x5982;&#x4F55;&#x4FDD;&#x6301;&#x4E0E;&#x6570;&#x636E;&#x5E93; ORM &#x65E0;&#x5173;&#x7684;&#x79D8;&#x8BC0;&#xFF01;</p>
<blockquote>
<h3 id="knowledge-is-power-&#x77E5;&#x8BC6;&#x5C31;&#x662F;&#x529B;&#x91CF;">Knowledge Is Power &#x77E5;&#x8BC6;&#x5C31;&#x662F;&#x529B;&#x91CF;</h3>
<p>Again we have discovered the pitfalls of giving a class too much knowledge about application implementation details. By paying careful attention to how much knowledge we are giving a class, we can abide by all of the SOLID principles.</p>
<p>&#x6211;&#x4EEC;&#x518D;&#x6B21;&#x53D1;&#x73B0;&#x4E86;&#x4E00;&#x4E2A;&#x4F7F;&#x7C7B;&#x77E5;&#x9053;&#x592A;&#x591A;&#x4E1C;&#x897F;&#x7684;&#x9677;&#x9631;&#x3002;&#x901A;&#x8FC7;&#x5C0F;&#x5FC3;&#x7559;&#x610F;&#x662F;&#x5426;&#x8BA9;&#x4E00;&#x4E2A;&#x7C7B;&#x77E5;&#x9053;&#x4E86;&#x592A;&#x591A;&#xFF0C;&#x6211;&#x4EEC;&#x5C31;&#x53EF;&#x4EE5;&#x9075;&#x5B88;&#x6240;&#x6709;&#x7684;&#x201C;&#x575A;&#x5B9E;&#x201D;&#x539F;&#x5219;&#x3002;</p>
</blockquote>

                                
                                </section>
                            
    </div>
    <div class="search-results">
        <div class="has-results">
            
            <h1 class="search-results-title"><span class='search-results-count'></span> results matching "<span class='search-query'></span>"</h1>
            <ul class="search-results-list"></ul>
            
        </div>
        <div class="no-results">
            
            <h1 class="search-results-title">No results matching "<span class='search-query'></span>"</h1>
            
        </div>
    </div>
</div>

                        </div>
                    </div>
                
            </div>

            
                
                <a href="11.1_Introduction.html" class="navigation navigation-prev navigation-unique" aria-label="Previous page: 11.1 Introduction 介绍">
                    <i class="fa fa-angle-left"></i>
                </a>
                
                
            
        
    </div>

    <script>
        var gitbook = gitbook || [];
        gitbook.push(function() {
            gitbook.page.hasChanged({"page":{"title":"11.2 In Action 实践","level":"1.12.2","depth":2,"next":{"title":"12 Dependency Inversion Principle 依赖反转原则","level":"1.13","depth":1,"ref":"","articles":[{"title":"12.1 Introduction 介绍","level":"1.13.1","depth":2,"path":"page/12.1_Introduction.md","ref":"./page/12.1_Introduction.md","articles":[]},{"title":"12.2 In Action 实践","level":"1.13.2","depth":2,"path":"page/12.2_In_Action.md","ref":"./page/12.2_In_Action.md","articles":[]}]},"previous":{"title":"11.1 Introduction 介绍","level":"1.12.1","depth":2,"path":"page/11.1_Introduction.md","ref":"./page/11.1_Introduction.md","articles":[]},"dir":"ltr"},"config":{"gitbook":"*","theme":"default","variables":{},"plugins":[],"pluginsConfig":{"highlight":{},"search":{},"lunr":{"maxIndexSize":1000000,"ignoreSpecialCharacters":false},"sharing":{"facebook":true,"twitter":true,"google":false,"weibo":false,"instapaper":false,"vk":false,"all":["facebook","google","twitter","weibo","instapaper"]},"fontsettings":{"theme":"white","family":"sans","size":2},"theme-default":{"styles":{"website":"styles/website.css","pdf":"styles/pdf.css","epub":"styles/epub.css","mobi":"styles/mobi.css","ebook":"styles/ebook.css","print":"styles/print.css"},"showLevel":false}},"structure":{"langs":"LANGS.md","readme":"README.md","glossary":"GLOSSARY.md","summary":"SUMMARY.md"},"pdf":{"pageNumbers":true,"fontSize":12,"fontFamily":"Arial","paperSize":"a4","chapterMark":"pagebreak","pageBreaksBefore":"/","margin":{"right":62,"left":62,"top":56,"bottom":56}},"styles":{"website":"styles/website.css","pdf":"styles/pdf.css","epub":"styles/epub.css","mobi":"styles/mobi.css","ebook":"styles/ebook.css","print":"styles/print.css"}},"file":{"path":"page/11.2_In_Action.md","mtime":"2017-06-29T04:04:17.000Z","type":"markdown"},"gitbook":{"version":"3.2.2","time":"2017-06-29T04:15:21.787Z"},"basePath":"..","book":{"language":""}});
        });
    </script>
</div>

        
    <script src="../gitbook/gitbook.js"></script>
    <script src="../gitbook/theme.js"></script>
    
        
        <script src="../gitbook/gitbook-plugin-search/search-engine.js"></script>
        
    
        
        <script src="../gitbook/gitbook-plugin-search/search.js"></script>
        
    
        
        <script src="../gitbook/gitbook-plugin-lunr/lunr.min.js"></script>
        
    
        
        <script src="../gitbook/gitbook-plugin-lunr/search-lunr.js"></script>
        
    
        
        <script src="../gitbook/gitbook-plugin-sharing/buttons.js"></script>
        
    
        
        <script src="../gitbook/gitbook-plugin-fontsettings/fontsettings.js"></script>
        
    

    </body>
</html>

